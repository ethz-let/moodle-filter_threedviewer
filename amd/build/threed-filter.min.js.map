{"version":3,"sources":["../src/threed-filter.js"],"names":["init","loader","loaders","ktx2","setTranscoderPath","draco","setDecoderPath","modelLinks","document","querySelectorAll","forEach","el","addr","URL","width","searchParams","get","noWireframe","zoom","noCenter","noScale","height","setAttribute","href","replace","search","viewer","createElement","model","appendChild","cloneNode","parentNode","replaceChild"],"mappings":"6LAEoB,QAAPA,CAAAA,IAAO,EAAM,CACtBC,SAAOC,OAAP,CAAeC,IAAf,CAAoBC,iBAApB,CAAuC,kCAAvC,EACAH,SAAOC,OAAP,CAAeG,KAAf,CAAqBC,cAArB,CAAqC,kCAArC,EAEA,GAAMC,CAAAA,CAAU,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,yHAA1B,CAAnB,CACAF,CAAU,CAACG,OAAX,CAAmB,SAACC,CAAD,CAAQ,IACjBC,CAAAA,CAAI,CAAG,GAAIC,CAAAA,GAAJ,CAAQF,CAAR,CADU,CAEjBG,CAAK,CAAGF,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,OAAtB,CAFS,CAGjBC,CAAW,CAAGL,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,aAAtB,CAHG,CAIjBE,CAAI,CAAGN,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,MAAtB,CAJU,CAKjBG,CAAQ,CAAGP,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,UAAtB,CALM,CAMjBI,CAAO,CAAGR,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,SAAtB,CANO,CAOnBK,CAAM,CAAGT,CAAI,CAACG,YAAL,CAAkBC,GAAlB,CAAsB,QAAtB,CAPU,CAQvB,GAAI,CAACK,CAAD,EAAqB,EAAV,EAAAA,CAAf,CAA6B,CACzBA,CAAM,CAAG,OACZ,CAEDV,CAAE,CAACW,YAAH,CAAgB,MAAhB,CAAwBV,CAAI,CAACW,IAAL,CAAUC,OAAV,CAAkBZ,CAAI,CAACa,MAAvB,CAA+B,EAA/B,CAAxB,EAEA,GAAMC,CAAAA,CAAM,CAAGlB,QAAQ,CAACmB,aAAT,CAAuB,eAAvB,CAAf,CACAD,CAAM,CAACJ,YAAP,CAAoB,UAApB,CAAgC,EAAhC,EACAI,CAAM,CAACJ,YAAP,CAAoB,MAApB,CAA4B,EAA5B,EACAI,CAAM,CAACJ,YAAP,CAAoB,SAApB,CAA+B,EAA/B,EACAI,CAAM,CAACJ,YAAP,CAAoB,aAApB,CAAmC,EAAnC,EACA,GAAI,CAAC,CAACR,CAAF,EAAoB,EAAT,EAAAA,CAAf,CAA4B,CACxBY,CAAM,CAACJ,YAAP,CAAoB,OAApB,CAA6BR,CAA7B,CACH,CACD,GAAI,CAAC,CAACO,CAAF,EAAsB,EAAV,EAAAA,CAAhB,CAA8B,CAC1BK,CAAM,CAACJ,YAAP,CAAoB,QAApB,CAA8BD,CAA9B,CACH,CACD,GAAoB,IAAhB,GAAAJ,CAAJ,CAA0B,CACtBS,CAAM,CAACJ,YAAP,CAAoB,WAApB,CAAiC,EAAjC,CACH,CACD,GAAa,IAAT,GAAAJ,CAAI,EAAqB,EAAR,EAAAA,CAArB,CAAiC,CAC7BQ,CAAM,CAACJ,YAAP,CAAoB,aAApB,CAAmCJ,CAAnC,CACH,CACD,GAAMU,CAAAA,CAAK,CAAGpB,QAAQ,CAACmB,aAAT,CAAuB,cAAvB,CAAd,CACA,GAAgB,IAAZ,GAAAP,CAAJ,CAAsB,CAClBQ,CAAK,CAACN,YAAN,CAAmB,OAAnB,CAA4B,EAA5B,CACH,CACD,GAAiB,IAAb,GAAAH,CAAJ,CAAuB,CACnBS,CAAK,CAACN,YAAN,CAAmB,QAAnB,CAA6B,EAA7B,CACH,CACDM,CAAK,CAACC,WAAN,CAAkBlB,CAAE,CAACmB,SAAH,EAAlB,EACAJ,CAAM,CAACG,WAAP,CAAmBD,CAAnB,EACAjB,CAAE,CAACoB,UAAH,CAAcC,YAAd,CAA2BN,CAA3B,CAAmCf,CAAnC,CACH,CAzCD,CA0CH,C","sourcesContent":["import {loader} from \"filter_threedviewer/threed-viewer\";\n\nexport const init = () => {\n    loader.loaders.ktx2.setTranscoderPath( '/filter/threedviewer/libs/basis/' );\n    loader.loaders.draco.setDecoderPath( '/filter/threedviewer/libs/draco/' );\n\n    const modelLinks = document.querySelectorAll(':not(threed-model) > a[href*=\".stl\"], :not(threed-model) > a[href*=\".gltf\"], :not(threed-model) > a[href*=\".glb\"]');\n    modelLinks.forEach((el) => {\n        const addr = new URL(el);\n        const width = addr.searchParams.get('width');\n        const noWireframe = addr.searchParams.get('nowireframe');\n        const zoom = addr.searchParams.get('zoom');\n        const noCenter = addr.searchParams.get('nocenter');\n        const noScale = addr.searchParams.get('noScale');\n        let height = addr.searchParams.get('height');\n        if (!height || height == '') {\n            height = \"300px\";\n        }\n\n        el.setAttribute('href', addr.href.replace(addr.search, ''));\n\n        const viewer = document.createElement('threed-viewer');\n        viewer.setAttribute('controls', '');\n        viewer.setAttribute('help', '');\n        viewer.setAttribute('toolbar', '');\n        viewer.setAttribute('axis-helper', '');\n        if (!!width && width != '') {\n            viewer.setAttribute('width', width);\n        }\n        if (!!height && height != '') {\n            viewer.setAttribute('height', height);\n        }\n        if (noWireframe === null) {\n            viewer.setAttribute('wireframe', '');\n        }\n        if (zoom !== null && zoom != '') {\n            viewer.setAttribute('camera-zoom', zoom);\n        }\n        const model = document.createElement('threed-model');\n        if (noScale === null) {\n            model.setAttribute('scale', '');\n        }\n        if (noCenter === null) {\n            model.setAttribute('center', '');\n        }\n        model.appendChild(el.cloneNode());\n        viewer.appendChild(model);\n        el.parentNode.replaceChild(viewer, el);\n    });\n};\n"],"file":"threed-filter.min.js"}